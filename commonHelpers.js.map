{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\n\nexport async function getImages(query, currentPage) {\n  const axios = Axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n      key: '43101979-d4b3d95f27087e7220544f5cb',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    },\n  });\n\n  const response = await axios.get('');\n  return response.data;\n}\n\n// export function loadMore(query) {\n//   perPage += 1;\n//   axios.get('');\n//   console.log(response.data);\n\n//   return response.data;\n// }\n\n// const API_KEY = '43101979-d4b3d95f27087e7220544f5cb';\n// const baseURL = 'https://pixabay.com/api/?';\n// const params = new URLSearchParams({\n//   key: API_KEY,\n//   q: query,\n//   image_type: 'photo',\n//   orientation: 'horizontal',\n//   safesearch: true,\n// });\n// const URL = baseURL + params;\n\n//   return fetch(URL).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   });\n\n// У файлі pixabay-api.js зберігай функції для HTTP-запитів.\n\n// key — твій унікальний ключ доступу до API.  43101979-d4b3d95f27087e7220544f5cb\n// q — слово для пошуку. Те, що буде вводити користувач.\n// image_type — тип зображення. Потрібні тільки фотографії, тому постав значення photo.\n// orientation — орієнтація фотографії. Постав значення horizontal.\n// safesearch — фільтр за віком. Постав значення true.\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const galleryEl = document.querySelector('.gallery');\nexport function createMarkUp(images) {\n  const markUp = images\n    .map(\n      image => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\"\n    href=\"${image.largeImageURL}\"\n    ><img class=\"img\" loading=\"lazy\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n  />\n  <ul class=\"img-dscr\">\n    <li>\n      <p><b>Likes</b><br /> ${image.likes}</p>\n    </li>\n    <li>\n      <p><b>Views</b><br /> ${image.views}</p>\n    </li>\n    <li>\n      <p><b>Comments</b><br /> ${image.comments}</p>\n    </li>\n    <li>\n      <p><b>Downloads</b><br /> ${image.downloads}</p>\n    </li>\n  </ul>\n  </a>\n</li>\n\n`\n    )\n    .join('');\n  galleryEl.insertAdjacentHTML('beforeend', markUp);\n  const lightbox = new SimpleLightbox('.gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\n// У файлі render-functions.js створи функції для відображення елементів інтерфейсу.\n","import './js/pixabay-api.js';\nimport { getImages } from './js/pixabay-api.js';\nimport './js/render-function.js';\nimport { createMarkUp, galleryEl } from './js/render-function.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  formEl: document.querySelector('.form'),\n  inputEl: document.querySelector('input'),\n  loaderEl: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-btn'),\n};\nconst lightbox = new SimpleLightbox('.gallery .gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nlet queryTrimed;\nlet currentPage = 1;\nlet maxPage = 0;\nconst ppageSize = 15;\nlet dataImages;\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  lightbox.refresh();\n  showLoader();\n  galleryEl.innerHTML = '';\n\n  queryTrimed = refs.inputEl.value.trim();\n  if (queryTrimed === '') {\n    hideLoader();\n    return iziToast.warning({\n      title: 'Caution',\n      message: 'Please complete the field!',\n      position: 'topRight',\n    });\n  }\n  currentPage = 1;\n\n  try {\n    dataImages = await getImages(queryTrimed, currentPage);\n    maxPage = Math.ceil(dataImages.totalHits / ppageSize);\n\n    if (dataImages.hits.length === 0) {\n      hideLoader();\n      return iziToast.info({\n        title: 'Sorry',\n        message:\n          'There are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n\n    createMarkUp(dataImages.hits);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  } finally {\n    hideLoader();\n  }\n  checkBtnStatus();\n  refs.inputEl.value = '';\n}\n\nasync function onLoadMore(event) {\n  showLoader();\n  lightbox.refresh();\n  currentPage += 1;\n\n  try {\n    dataImages = await getImages(queryTrimed, currentPage);\n    createMarkUp(dataImages.hits);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  } finally {\n    hideLoader();\n    checkBtnStatus();\n    scrollGallery();\n  }\n}\n\nfunction showLoader() {\n  refs.loaderEl.classList.add('is-open');\n}\nfunction hideLoader() {\n  refs.loaderEl.classList.remove('is-open');\n}\nfunction showBtnLoad() {\n  refs.loadMoreBtn.classList.add('is-open');\n}\nfunction hideBtnLoad() {\n  refs.loadMoreBtn.classList.remove('is-open');\n}\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideBtnLoad();\n    return iziToast.info({\n      title: 'Sorry',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    showBtnLoad();\n  }\n}\n\nfunction scrollGallery() {\n  const countCards = 2;\n  const height =\n    galleryEl.firstElementChild.getBoundingClientRect().height * countCards;\n\n  scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n}\n\n// У файлі main.js напиши всю логіку роботи додатка.\n\n//  && dataImages.hits.length !== 0\n"],"names":["getImages","query","currentPage","Axios","galleryEl","createMarkUp","images","markUp","image","SimpleLightbox","refs","lightbox","queryTrimed","maxPage","ppageSize","dataImages","onFormSubmit","onLoadMore","event","showLoader","hideLoader","iziToast","error","checkBtnStatus","scrollGallery","showBtnLoad","hideBtnLoad","height"],"mappings":"owBAEO,eAAeA,EAAUC,EAAOC,EAAa,CAelD,OADiB,MAbHC,EAAM,OAAO,CACzB,QAAS,2BACT,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACL,CAAG,EAE4B,IAAI,EAAE,GACnB,IAClB,CCfO,MAAME,EAAY,SAAS,cAAc,UAAU,EACnD,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EACZ,IACCE,GAAS;AAAA;AAAA,YAEHA,EAAM,aAAa;AAAA;AAAA,aAElBA,EAAM,YAAY;AAAA,aAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,8BAIOA,EAAM,KAAK;AAAA;AAAA;AAAA,8BAGXA,EAAM,KAAK;AAAA;AAAA;AAAA,iCAGRA,EAAM,QAAQ;AAAA;AAAA;AAAA,kCAGbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAO5C,EACA,KAAK,EAAE,EACVJ,EAAU,mBAAmB,YAAaG,CAAM,EAC/B,IAAIE,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAClB,CAAG,CACH,CC9BA,MAAMC,EAAO,CACX,OAAQ,SAAS,cAAc,OAAO,EACtC,QAAS,SAAS,cAAc,OAAO,EACvC,SAAU,SAAS,cAAc,SAAS,EAC1C,YAAa,SAAS,cAAc,WAAW,CACjD,EACMC,EAAW,IAAIF,EAAe,yBAA0B,CAC5D,aAAc,MACd,aAAc,GAChB,CAAC,EACD,IAAIG,EACAV,EAAc,EACdW,EAAU,EACd,MAAMC,EAAY,GAClB,IAAIC,EAEJL,EAAK,OAAO,iBAAiB,SAAUM,CAAY,EACnDN,EAAK,YAAY,iBAAiB,QAASO,CAAU,EAErD,eAAeD,EAAaE,EAAO,CAOjC,GANAA,EAAM,eAAc,EACpBP,EAAS,QAAO,EAChBQ,IACAf,EAAU,UAAY,GAEtBQ,EAAcF,EAAK,QAAQ,MAAM,KAAI,EACjCE,IAAgB,GAClB,OAAAQ,IACOC,EAAS,QAAQ,CACtB,MAAO,UACP,QAAS,6BACT,SAAU,UAChB,CAAK,EAEHnB,EAAc,EAEd,GAAI,CAIF,GAHAa,EAAa,MAAMf,EAAUY,EAAaV,CAAW,EACrDW,EAAU,KAAK,KAAKE,EAAW,UAAYD,CAAS,EAEhDC,EAAW,KAAK,SAAW,EAC7B,OAAAK,IACOC,EAAS,KAAK,CACnB,MAAO,QACP,QACE,oEACF,SAAU,UAClB,CAAO,EAGHhB,EAAaU,EAAW,IAAI,CAC7B,OAAQO,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CACjD,QAAY,CACRF,GACD,CACDG,IACAb,EAAK,QAAQ,MAAQ,EACvB,CAEA,eAAeO,EAAWC,EAAO,CAC/BC,IACAR,EAAS,QAAO,EAChBT,GAAe,EAEf,GAAI,CACFa,EAAa,MAAMf,EAAUY,EAAaV,CAAW,EACrDG,EAAaU,EAAW,IAAI,CAC7B,OAAQO,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CACjD,QAAY,CACRF,IACAG,IACAC,GACD,CACH,CAEA,SAASL,GAAa,CACpBT,EAAK,SAAS,UAAU,IAAI,SAAS,CACvC,CACA,SAASU,GAAa,CACpBV,EAAK,SAAS,UAAU,OAAO,SAAS,CAC1C,CACA,SAASe,GAAc,CACrBf,EAAK,YAAY,UAAU,IAAI,SAAS,CAC1C,CACA,SAASgB,GAAc,CACrBhB,EAAK,YAAY,UAAU,OAAO,SAAS,CAC7C,CACA,SAASa,GAAiB,CACxB,GAAIrB,GAAeW,EACjB,OAAAa,IACOL,EAAS,KAAK,CACnB,MAAO,QACP,QAAS,6DACT,SAAU,UAChB,CAAK,EAEDI,GAEJ,CAEA,SAASD,GAAgB,CAEvB,MAAMG,EACJvB,EAAU,kBAAkB,wBAAwB,OAAS,EAE/D,SAAS,CACP,IAAKuB,EACL,SAAU,QACd,CAAG,CACH"}