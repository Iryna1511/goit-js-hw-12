{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\n\nexport async function getImages(query, currentPage) {\n  const axios = Axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n      key: '43101979-d4b3d95f27087e7220544f5cb',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    },\n  });\n\n  const response = await axios.get('');\n  return response.data;\n}\n\n// У файлі pixabay-api.js зберігай функції для HTTP-запитів.\n\n// key — твій унікальний ключ доступу до API.  43101979-d4b3d95f27087e7220544f5cb\n// q — слово для пошуку. Те, що буде вводити користувач.\n// image_type — тип зображення. Потрібні тільки фотографії, тому постав значення photo.\n// orientation — орієнтація фотографії. Постав значення horizontal.\n// safesearch — фільтр за віком. Постав значення true.\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport const galleryEl = document.querySelector('.gallery');\n\nfunction imageTemplate(obj) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = obj;\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\"\n    href=\"${largeImageURL}\"\n    ><img class=\"img\" loading=\"lazy\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n  />\n  <ul class=\"img-dscr\">\n    <li>\n      <p><b>Likes</b><br /> ${likes}</p>\n    </li>\n    <li>\n      <p><b>Views</b><br /> ${views}</p>\n    </li>\n    <li>\n      <p><b>Comments</b><br /> ${comments}</p>\n    </li>\n    <li>\n      <p><b>Downloads</b><br /> ${downloads}</p>\n    </li>\n  </ul>\n  </a>\n</li>\n\n`;\n}\nfunction imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n\nexport function createMarkUp(arr) {\n  const markup = imagesTemplate(arr);\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\n// У файлі render-functions.js створи функції для відображення елементів інтерфейсу.\n","import './js/pixabay-api.js';\nimport { getImages } from './js/pixabay-api.js';\nimport './js/render-function.js';\nimport { createMarkUp, galleryEl } from './js/render-function.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  formEl: document.querySelector('.form'),\n  inputEl: document.querySelector('input'),\n  loaderEl: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-btn'),\n};\n\nlet queryTrimed;\nlet currentPage = 1;\nlet maxPage = 0;\nconst ppageSize = 15;\nlet dataImages;\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  showLoader();\n  galleryEl.innerHTML = '';\n\n  queryTrimed = refs.inputEl.value.trim();\n  if (queryTrimed === '') {\n    hideLoader();\n    return iziToast.warning({\n      title: 'Caution',\n      message: 'Please complete the field!',\n      position: 'topRight',\n    });\n  }\n  currentPage = 1;\n\n  try {\n    dataImages = await getImages(queryTrimed, currentPage);\n    maxPage = Math.ceil(dataImages.totalHits / ppageSize);\n\n    if (dataImages.hits.length === 0) {\n      hideLoader();\n      hideBtnLoad();\n      return iziToast.info({\n        title: 'Sorry',\n        message:\n          'There are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n\n    createMarkUp(dataImages.hits);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  } finally {\n    hideLoader();\n  }\n  checkBtnStatus();\n  refs.inputEl.value = '';\n}\n\nasync function onLoadMore(event) {\n  hideBtnLoad();\n  showLoader();\n  currentPage += 1;\n\n  try {\n    dataImages = await getImages(queryTrimed, currentPage);\n    createMarkUp(dataImages.hits);\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  } finally {\n    hideLoader();\n    checkBtnStatus();\n    scrollGallery();\n  }\n}\n\nfunction showLoader() {\n  refs.loaderEl.classList.add('is-open');\n}\nfunction hideLoader() {\n  refs.loaderEl.classList.remove('is-open');\n}\nfunction showBtnLoad() {\n  refs.loadMoreBtn.classList.add('is-open');\n}\nfunction hideBtnLoad() {\n  refs.loadMoreBtn.classList.remove('is-open');\n}\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideBtnLoad();\n    return iziToast.info({\n      title: 'Sorry',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    showBtnLoad();\n  }\n}\n\nfunction scrollGallery() {\n  const countCards = 2;\n  const height =\n    galleryEl.firstElementChild.getBoundingClientRect().height * countCards;\n\n  scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n}\n\n// У файлі main.js напиши всю логіку роботи додатка.\n"],"names":["getImages","query","currentPage","Axios","lightbox","SimpleLightbox","galleryEl","imageTemplate","obj","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imagesTemplate","arr","createMarkUp","markup","refs","queryTrimed","maxPage","ppageSize","dataImages","onFormSubmit","onLoadMore","event","showLoader","hideLoader","iziToast","hideBtnLoad","error","checkBtnStatus","scrollGallery","showBtnLoad","height"],"mappings":"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"}